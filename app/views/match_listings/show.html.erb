<hr>

<% if @match_listing.match.present? %>
  <p style="margin: 8px 0;">
    <%= link_to "作成された試合を見る", match_path(@match_listing.match) %>
  </p>
<% end %>

<h2>この募集に申請する</h2>

<% if @match_listing.open? %>
  <%= form_with model: [@match_listing, MatchApplication.new], local: true do |f| %>
    <div style="margin-bottom: 12px;">
      <%= f.label :message, "メッセージ（任意）" %><br>
      <%= f.text_area :message, rows: 4, style: "width: 100%; max-width: 600px;" %>
    </div>
    <%= f.submit "申請する" %>
  <% end %>
<% else %>
  <p style="color: #666;">この募集は受付終了です</p>
<% end %>

<p>
  <%= link_to "申請一覧を見る", match_listing_match_applications_path(@match_listing) %>
</p>

<% if @match_listing.owner == current_user %>
  <p style="margin-top: 16px;">
    <%= link_to "この募集を削除",
          match_listing_path(@match_listing),
          data: { turbo_method: :delete, turbo_confirm: "本当にこの募集を削除しますか？" } %>
  </p>
<% end %>
